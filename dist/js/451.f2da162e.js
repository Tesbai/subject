"use strict";(self["webpackChunk_10_18"]=self["webpackChunk_10_18"]||[]).push([[451],{6451:function(e,r,t){t.r(r),t.d(r,{default:function(){return F}});var s=function(){var e=this,r=e._self._c;return r("div",{staticClass:"mask"},[r("div",{staticClass:"container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),r("el-form-item",{attrs:{label:"验证码",prop:"text"}},[r("el-input",{staticStyle:{width:"80%"},attrs:{maxlength:"4"},model:{value:e.ruleForm.text,callback:function(r){e.$set(e.ruleForm,"text",r)},expression:"ruleForm.text"}}),r("img",{staticClass:"code_img",attrs:{src:e.url},on:{click:function(r){return e.replaceCodeImage()}}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("提交")]),r("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},o=[];t(57658);const a="undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var n={randomUUID:a};t(1439),t(87585),t(55315);let i;const u=new Uint8Array(16);function l(){if(!i&&(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(u)}const m=[];for(let b=0;b<256;++b)m.push((b+256).toString(16).slice(1));function c(e,r=0){return m[e[r+0]]+m[e[r+1]]+m[e[r+2]]+m[e[r+3]]+"-"+m[e[r+4]]+m[e[r+5]]+"-"+m[e[r+6]]+m[e[r+7]]+"-"+m[e[r+8]]+m[e[r+9]]+"-"+m[e[r+10]]+m[e[r+11]]+m[e[r+12]]+m[e[r+13]]+m[e[r+14]]+m[e[r+15]]}function d(e,r,t){if(n.randomUUID&&!r&&!e)return n.randomUUID();e=e||{};const s=e.random||(e.rng||l)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=s[e];return r}return c(s)}var p=d,f=t(62103),g=t(50680),h={data(){var e=(e,r,t)=>{if(!r)return t(new Error("用户名不能为空！"));/\w{5,12}/g.test(r)?t():t(new Error("用户名格式错误！"))},r=(e,r,t)=>{if(!r)return t(new Error("密码不能为空！"));/\w{6,12}/g.test(r)?t():t(new Error("密码格式错误！"))},t=(e,r,t)=>{if(!r)return t(new Error("验证码不能为空！"));/\w{4}/g.test(r)?t():t(new Error("验证码格式错误！"))};return{ruleForm:{username:"",password:"",text:""},url:"",uid:null,timer:0,rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:r,trigger:"blur"}],text:[{validator:t,trigger:"blur"}]}}},created(){this.generateCodeImage(),this.timer=setInterval((()=>{this.generateCodeImage()}),6e4)},methods:{generateCodeImage(){this.uid=p(),this.url=`https://www.chengzier.cn:8000/api/generateimagecode?uuid=${this.uid}`},replaceCodeImage(){this.generateCodeImage(),clearInterval(this.timer),this.timer=setInterval((()=>{this.generateCodeImage()}),6e4)},resetForm(e){this.$refs[e].resetFields()},submitForm(e){this.$refs[e].validate((async e=>{if(!e)return!1;try{const{data:e}=await(0,f.x4)(Object.assign({uuid:this.uid},this.ruleForm));"error"==e.status?this.$message.error(e.msg):(g.Z.set("id",e.token,{expires:1}),this.$store.commit("writeToken",e.token),this.$message({message:"恭喜你，登录成功……",type:"success"}),this.$router.push("/"))}catch(r){this.$message.error("登录异常，请稍后重试")}}))}},destroyed(){clearInterval(this.timer)}},w=h,v=t(1001),y=(0,v.Z)(w,s,o,!1,null,null,null),F=y.exports}}]);
//# sourceMappingURL=451.f2da162e.js.map