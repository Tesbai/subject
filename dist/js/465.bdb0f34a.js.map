{"version":3,"file":"js/465.bdb0f34a.js","mappings":"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","sources":["webpack://10.18/./src/views/Video/index.vue","webpack://10.18/./src/views/Video/bullet.vue","webpack://10.18/src/views/Video/bullet.vue","webpack://10.18/./src/views/Video/bullet.vue?f56d","webpack://10.18/./src/views/Video/bullet.vue?75c6","webpack://10.18/./src/views/Video/add.vue","webpack://10.18/./src/api/video.js","webpack://10.18/src/views/Video/add.vue","webpack://10.18/./src/views/Video/add.vue?1d7d","webpack://10.18/./src/views/Video/add.vue?cd63","webpack://10.18/src/views/Video/index.vue","webpack://10.18/./src/views/Video/index.vue?e522","webpack://10.18/./src/views/Video/index.vue?8273","webpack://10.18/./src/api/chapter.js","webpack://10.18/./src/api/subject.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.add_state)?_c('Add',{attrs:{\"chapter_id\":_vm.chapter_id},on:{\"add_video\":_vm.add_video,\"upload\":_vm.upload}}):_vm._e(),_c('el-button',{on:{\"click\":_vm.add_video}},[_vm._v(\"新增视频\")]),_c('div',{staticClass:\"find_video\"},[_c('el-select',{attrs:{\"placeholder\":_vm.value_subject},on:{\"change\":_vm.change},model:{value:(_vm.value_subject),callback:function ($$v) {_vm.value_subject=$$v},expression:\"value_subject\"}},_vm._l((_vm.subject),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1),_c('el-select',{attrs:{\"placeholder\":_vm.value_chapter},on:{\"change\":_vm.change_chapter},model:{value:(_vm.value_chapter),callback:function ($$v) {_vm.value_chapter=$$v},expression:\"value_chapter\"}},_vm._l((_vm.chapter),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.name}})}),1)],1),(_vm.cont_state)?_c('Bullet'):_vm._e(),_vm._l((_vm.video_src),function(item,index){return _c('div',{key:item.id,staticClass:\"video\"},[_c('video',{attrs:{\"src\":item,\"controls\":\"\",\"muted\":\"\",\"height\":\"300px\",\"width\":\"70%\"},domProps:{\"muted\":true}}),_c('div',{staticClass:\"btn\"},[_c('el-button',{on:{\"click\":function($event){return _vm.upload_video(index)}}},[_vm._v(\"更新\")]),_c('el-button',{on:{\"click\":function($event){return _vm.delete_video(index)}}},[_vm._v(\"删除\")])],1)])})],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('h1',[_vm._v(\"请添加内容\")])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <h1>请添加内容</h1>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./bullet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./bullet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./bullet.vue?vue&type=template&id=1ad2e8ff&\"\nimport script from \"./bullet.vue?vue&type=script&lang=js&\"\nexport * from \"./bullet.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mask\"},[_c('div',{staticClass:\"form\"},[_c('el-upload',{ref:\"upload\",staticClass:\"upload-demo\",attrs:{\"action\":\"https://www.chengzier.cn:8000/api/chapter_video\",\"limit\":1,\"name\":\"video\",\"auto-upload\":false,\"headers\":_vm.headers,\"data\":_vm.video_data,\"on-success\":_vm.res,\"on-change\":_vm.change}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"选择视频\")])],1),_c('el-form',{attrs:{\"label-position\":_vm.labelPosition,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{model:{value:(_vm.video_data.name),callback:function ($$v) {_vm.$set(_vm.video_data, \"name\", $$v)},expression:\"video_data.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"章节id\"}},[_c('el-input',{model:{value:(_vm.video_data.chapter_id),callback:function ($$v) {_vm.$set(_vm.video_data, \"chapter_id\", $$v)},expression:\"video_data.chapter_id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"是否收费\"}},[_c('el-input',{model:{value:(_vm.video_data.permission),callback:function ($$v) {_vm.$set(_vm.video_data, \"permission\", $$v)},expression:\"video_data.permission\"}})],1)],1),_c('div',{staticClass:\"btn\"},[_c('el-button',{on:{\"click\":_vm.upload}},[_vm._v(\"添加\")]),_c('el-button',{on:{\"click\":_vm.cancle}},[_vm._v(\"取消\")])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from '@/axios'\r\n\r\nexport function getVideo(pk){\r\n    return request({\r\n        url:`chapter_video?pk=${pk}`,\r\n        data:{\r\n            pk:pk\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}\r\nexport function addVideo(video, name, chapter_id, video_permission=1){\r\n    const formdata = new FormData();\r\n    formdata.append('video', video);\r\n    formdata.append('name', name);\r\n    formdata.append('chapter_id', chapter_id);\r\n    formdata.append('video_permission', video_permission);\r\n    return request({\r\n        url:'chapter_video',\r\n        data:formdata\r\n    })\r\n}\r\n\r\nexport function deleteVideo(pk){\r\n    return request({\r\n        url:'chapter_video',\r\n        method:'DELETE',\r\n        data:{\r\n            pk:pk\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}","<template>\r\n  <div class=\"mask\">\r\n    <div class=\"form\">\r\n      <el-upload\r\n        class=\"upload-demo\"\r\n        action=\"https://www.chengzier.cn:8000/api/chapter_video\"\r\n        :limit=\"1\"\r\n        name=\"video\"\r\n        :auto-upload=\"false\"\r\n        :headers=\"headers\"\r\n        ref=\"upload\"\r\n        :data=\"video_data\"\r\n        :on-success=\"res\"\r\n        :on-change=\"change\"\r\n      >\r\n        <el-button size=\"small\" type=\"primary\">选择视频</el-button>\r\n      </el-upload>\r\n      <el-form :label-position=\"labelPosition\" label-width=\"80px\">\r\n        <el-form-item label=\"名称\">\r\n          <el-input v-model=\"video_data.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"章节id\">\r\n          <el-input v-model=\"video_data.chapter_id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否收费\">\r\n          <el-input v-model=\"video_data.permission\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div class=\"btn\">\r\n        <el-button @click=\"upload\">添加</el-button>\r\n        <el-button @click=\"cancle\">取消</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { addVideo } from \"@/api/video\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      labelPosition: \"left\",\r\n      headers: {\r\n        Authorization: \"\"\r\n      },\r\n      video_data:{\r\n        name:'',\r\n        chapter_id:'',\r\n        permission:''\r\n      }\r\n    };\r\n  },\r\n  props: [\r\n    \"chapter_id\"\r\n  ],\r\n  created(){\r\n    this.video_data.chapter_id = this.chapter_id\r\n  },\r\n  methods: {\r\n    upload() {\r\n      this.headers[\"Authorization\"] = \"Bearer \" + this.$store.state.token;\r\n      this.$refs.upload.submit();\r\n    },\r\n    res(e){\r\n        this.$emit(\"upload\");\r\n    },\r\n    change(file, fileList){\r\n        \r\n    },\r\n    cancle() {\r\n      this.$emit(\"add_video\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.mask {\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  background-color: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 999;\r\n}\r\n\r\n.form {\r\n  background-color: #fff;\r\n  border-radius: 10px;\r\n  width: 500px;\r\n  padding: 30px;\r\n}\r\n\r\n.btn {\r\n  display: flex;\r\n  justify-content: space-around;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=5da89cc6&\"\nimport script from \"./add.vue?vue&type=script&lang=js&\"\nexport * from \"./add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=5da89cc6&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <Add v-if=\"add_state\" @add_video=\"add_video\" @upload=\"upload\" :chapter_id=\"chapter_id\"></Add>\r\n    <el-button @click=\"add_video\">新增视频</el-button>\r\n    <div class=\"find_video\">\r\n      <el-select v-model=\"value_subject\" :placeholder=\"value_subject\" @change=\"change\">\r\n        <el-option v-for=\"item in subject\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"value_chapter\" :placeholder=\"value_chapter\" @change=\"change_chapter\">\r\n        <el-option v-for=\"item in chapter\" :key=\"item.id\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n      </el-select>\r\n    </div>\r\n    <Bullet v-if=\"cont_state\"></Bullet>\r\n    <div class=\"video\" v-for=\"(item, index) in video_src\" :key=\"item.id\">\r\n      <video :src=\"item\" controls muted height=\"300px\" width=\"70%\"></video>\r\n      <div class=\"btn\">\r\n        <el-button @click=\"upload_video(index)\">更新</el-button>\r\n        <el-button @click=\"delete_video(index)\">删除</el-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Bullet from \"./bullet.vue\";\r\nimport Add from \"./add.vue\";\r\nimport { getSubject } from \"@/api/subject\";\r\nimport { getChapter } from \"@/api/chapter\";\r\nimport { getVideo, deleteVideo } from \"@/api/video\";\r\nexport default {\r\n  components: {\r\n    Bullet,\r\n    Add\r\n  },\r\n  data() {\r\n    return {\r\n      cont_state: false,\r\n      add_state: false,\r\n      subject: [],\r\n      chapter: [],\r\n      value_subject: \"\",\r\n      value_chapter: \"\",\r\n      video: [],\r\n      video_src: [],\r\n      chapter_id: \"\"\r\n    };\r\n  },\r\n  async created() {\r\n    if (!this.$store.state.subject.state && !this.$store.state.chapter.state) {\r\n      try {\r\n        const res = await getSubject();\r\n        this.subject = res.data.data;\r\n        const result = await getChapter(this.subject[0].id);\r\n        this.chapter = result.data.data;\r\n      } catch (e) {\r\n        console.log(e);\r\n      }\r\n    } else {\r\n      this.subject = this.$store.state.subject.list;\r\n      this.chapter = this.$store.state.chapter.chapter_list;\r\n    }\r\n    this.value_subject = this.subject[0].name;\r\n    this.value_chapter = this.chapter[0].name;\r\n    this.chapter_id = this.chapter[0].id;\r\n    this.get_video();\r\n  },\r\n  methods: {\r\n    async add_video() {\r\n      this.add_state = !this.add_state;\r\n    },\r\n    upload(){\r\n      this.add_video();\r\n      this.get_video(this.chapter_id)\r\n    },\r\n    async get_video(id = this.chapter[0].id) {\r\n      this.video_src = []\r\n      if (this.chapter.length != 0) {\r\n        this.cont_state = false;\r\n        const res = await getVideo(id);\r\n        this.video = res.data.data;\r\n        this.video.forEach(item => {\r\n          let temp = item.mp4_url.split(\".mp4\");\r\n          this.video_src.push(\r\n            `https://www.chengzier.cn:9000/api/videoplay?path=${temp[0]}`\r\n          );\r\n        });\r\n      } else {\r\n        this.cont_state = true;\r\n      }\r\n    },\r\n    async change(value) {\r\n      let select_subject = this.subject.filter(item => {\r\n        if (item.name == value) {\r\n          return true;\r\n        }\r\n      });\r\n      const res = await getChapter(select_subject[0].id);\r\n      this.chapter = res.data.data;\r\n      this.chapter_id = this.chapter[0].id\r\n      this.value_chapter = this.chapter[0].name\r\n      this.get_video(this.chapter[0].id);\r\n    },\r\n    async change_chapter(value) {\r\n      let select_chapter = this.chapter.filter(item => {\r\n        if (item.name == value) {\r\n          return true;\r\n        }\r\n      });\r\n      this.chapter_id = select_chapter[0].id\r\n      this.get_video(select_chapter[0].id);\r\n    },\r\n    async delete_video(index){\r\n      await deleteVideo(this.video[index].id)\r\n      this.get_video(this.chapter_id);\r\n    },\r\n    async upload_video(index){\r\n\r\n      this.delete_video(index);\r\n      this.add_video(this.chapter_id)\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-dropdown-link {\r\n  cursor: pointer;\r\n  color: #409eff;\r\n}\r\n.el-icon-arrow-down {\r\n  font-size: 12px;\r\n}\r\n.find_video {\r\n  margin-top: 20px;\r\n  display: flex;\r\n}\r\n.dropdown_menu {\r\n  height: 300px;\r\n  overflow-y: scroll;\r\n}\r\n\r\n.video {\r\n  margin-top: 20px;\r\n  display: flex;\r\n}\r\n.video {\r\n  border: 1px solid black;\r\n  margin-left: 20px;\r\n  position: relative\r\n}\r\n.btn{\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 0;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3ffc08d0&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=3ffc08d0&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3ffc08d0\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/axios'\r\n\r\nexport function getChapter(pk){\r\n    return request({\r\n        url:`chapter?pk=${pk}`\r\n    })\r\n}\r\n\r\nexport function changeChapter(pk, chapter_name){\r\n    return request({\r\n        url:'chapter',\r\n        method:'PUT',\r\n        data:{\r\n            pk:pk,\r\n            chapter_name:chapter_name\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}\r\n\r\nexport function addChapter(pk, chapter_name){\r\n    let formData = new FormData();\r\n    formData.append('pk', pk)\r\n    formData.append('chapter_name', chapter_name)\r\n    return request({\r\n        url:'chapter',\r\n        method:'POST',\r\n        data:formData\r\n    })\r\n}\r\n\r\nexport function deleteChapter(pk){\r\n    return request({\r\n        url:'chapter',\r\n        method:'DELETE',\r\n        data:{\r\n            pk:pk\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}","import request from '@/axios';\r\nimport qs from 'qs';\r\n\r\nexport function getSubject(){\r\n    return request({\r\n        url:'classify'\r\n    })\r\n}\r\n\r\nexport function addSubject(name){\r\n    const formDate = new FormData()\r\n    formDate.append(\"name\", name)\r\n    return request({\r\n        url:'classify',\r\n        method:'POST',\r\n        data: formDate\r\n    })\r\n}\r\n\r\nexport function delSubject(id){\r\n    return request({\r\n        url:'classify',\r\n        method:'DELETE',\r\n        data:{\r\n            pk:id,\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}\r\n\r\nexport function changeSubject(id, name){\r\n    return request({\r\n        url:'classify',\r\n        method:'PUT',\r\n        data:{\r\n            pk:id,\r\n            name:name,\r\n        },\r\n        headers:{\r\n            \"Content-Type\":\"application/x-www-form-urlencoded\"\r\n        }\r\n    })\r\n}"],"names":["render","_vm","this","_c","_self","add_state","attrs","chapter_id","on","add_video","upload","_e","_v","staticClass","value_subject","change","model","value","callback","$$v","expression","_l","subject","item","key","id","name","value_chapter","change_chapter","chapter","cont_state","video_src","index","domProps","$event","upload_video","delete_video","staticRenderFns","component","ref","headers","video_data","res","labelPosition","$set","permission","cancle","getVideo","pk","request","url","data","deleteVideo","method","Authorization","props","created","methods","$store","state","token","$refs","submit","e","$emit","file","fileList","components","Bullet","Add","video","list","chapter_list","getSubject","result","getChapter","console","log","get_video","length","forEach","temp","mp4_url","split","push","select_subject","filter","select_chapter","changeChapter","chapter_name","addChapter","formData","FormData","append","deleteChapter","addSubject","formDate","delSubject","changeSubject"],"sourceRoot":""}