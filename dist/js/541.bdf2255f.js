"use strict";(self["webpackChunk_10_18"]=self["webpackChunk_10_18"]||[]).push([[541],{65541:function(a,e,s){s.r(e),s.d(e,{default:function(){return _}});var t=function(){var a=this,e=a._self._c;return e("div",{staticClass:"cont"},[e("el-tree",{staticStyle:{width:"20%"},attrs:{data:a.data},on:{"node-click":a.handleNodeClick}}),e("div",{staticClass:"right"},[a._m(0),a.email_state?e("div",{staticClass:"email"},[e("div",{staticClass:"first"},[e("el-form",{attrs:{"label-position":a.labelPosition,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"原邮箱"}},[e("el-input",{attrs:{disabled:""},model:{value:a.email.init_email,callback:function(e){a.$set(a.email,"init_email",e)},expression:"email.init_email"}})],1),e("el-form-item",{attrs:{label:"验证码"}},[e("el-input",{model:{value:a.email.old_email_code,callback:function(e){a.$set(a.email,"old_email_code",e)},expression:"email.old_email_code"}})],1),e("el-button",{on:{click:a.get_email_code}},[a._v("获取验证码")]),e("el-button",[a._v("下一步")])],1)],1),a._e()]):a._e(),a.password_state?e("div",{staticClass:"password"},[e("el-form",{attrs:{"label-position":a.labelPosition,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"邮箱账号"}},[e("el-input",{attrs:{disabled:""},model:{value:a.email.init_email,callback:function(e){a.$set(a.email,"init_email",e)},expression:"email.init_email"}})],1),e("el-form-item",{attrs:{label:"新密码"}},[e("el-input",{model:{value:a.password.new_password,callback:function(e){a.$set(a.password,"new_password",e)},expression:"password.new_password"}})],1),e("el-form-item",{attrs:{label:"确认密码"}},[e("el-input",{model:{value:a.password.confirm_password,callback:function(e){a.$set(a.password,"confirm_password",e)},expression:"password.confirm_password"}})],1),e("el-form-item",{attrs:{label:"验证码"}},[e("el-input",{model:{value:a.password.password_code,callback:function(e){a.$set(a.password,"password_code",e)},expression:"password.password_code"}})],1)],1),e("el-button",{on:{click:a.get_password_code}},[a._v("获取验证码")]),e("el-button",{on:{click:a.change_password}},[a._v("更改密码")])],1):a._e(),a.avatar_state?e("div",{staticClass:"avatar"},[e("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"https://www.chengzier.cn:8000/api/changesuperavator",name:"avator","on-success":a.handleAvatarSuccess,"before-upload":a.beforeAvatarUpload,"auto-upload":!1,headers:a.headers,"on-progress":a.handleAvatarProgress}},[a.imageUrl?e("img",{staticClass:"avatar",attrs:{src:a.imageUrl}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e("el-button",{staticClass:"upload_avatar",on:{click:a.upload}},[a._v("上传")])],1):a._e()])],1)},l=[function(){var a=this,e=a._self._c;return e("div",{staticClass:"schedule"},[e("div",{staticClass:"circle now_state"},[a._v("1")]),e("div",{staticClass:"line"}),e("div",{staticClass:"circle"},[a._v("2")]),e("div",{staticClass:"line"}),e("div",{staticClass:"circle el-icon-check"})])}],i=(s(46229),s(17330),s(62062),s(57658),s(62103)),o=s(50680),r={data(){return{data:[{label:"绑定邮箱"},{label:"更改密码"},{label:"上传头像"}],labelPosition:"left",file:null,imageUrl:"",headers:{Authorization:""},email_state:!0,password_state:!1,avatar_state:!1,email:{init_email:"",new_email:"",confirm_email:"",new_email_code:"",old_email_code:""},password:{new_password:"",confirm_password:"",password_code:""}}},created(){this.email.init_email=this.$store.state.userProfile.email},computed:{init_email_state(){return!!this.email.init_email}},methods:{upload(){this.headers["Authorization"]="Bearer "+this.$store.state.token,this.$refs.upload.submit()},handleAvatarSuccess(a,e){this.imageUrl=URL.createObjectURL(e.raw)},handleAvatarProgress(a,e,s){console.log(a)},beforeAvatarUpload(a){const e="image/jpeg"===a.type,s=a.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s},async get_email_code(){const a=await(0,i.gv)("198176040@qq.com");console.log(a)},async bind_email(){this.get_email_code();const a=await(0,i.I8)(this.email.email_code);console.log(a)},handleNodeClick(a){a.label==this.data[0].label?(this.email_state=!0,this.password_state=!1,this.avatar_state=!1):a.label==this.data[1].label?(this.email_state=!1,this.password_state=!0,this.avatar_state=!1):a.label==this.data[2].label&&(this.email_state=!1,this.password_state=!1,this.avatar_state=!0)},async get_password_code(){const a=await(0,i.Gs)();console.log(a)},async change_password(){await(0,i.Cp)(this.password),"success"==res.data.status&&(o.Z.remove("id"),this.$store.state.token="",this.$router.push("/login"))}}},c=r,n=s(1001),d=(0,n.Z)(c,t,l,!1,null,"ee56c314",null),_=d.exports}}]);
//# sourceMappingURL=541.bdf2255f.js.map